{"version":3,"sources":["main.coffee","controllers/SchemaFormCtrl.coffee","controllers/SiteIndexCtrl.coffee","directives/consolePanel.coffee","directives/onCtrlS.coffee","routes/schema.coffee","routes/site.coffee","services/CoAuth.coffee","services/FormatJsonView.coffee","services/SocketConnect.coffee","services/WindowInfo.coffee"],"names":[],"mappings":"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","file":"app.min.js","sourcesContent":["StartApp = require '../actions/StartApp'\r\nCreateSequelize = require('../actions/CreateSequelize')\r\nRunTest = require('../actions/RunTest')\r\n\r\napp = angular.module(\"WEBYI\", [\"ngSanitize\", \"ui.router\", \"ngMessages\"])\r\n.config(($locationProvider, $urlRouterProvider) ->\r\n\t# html5Mode需要服务端配合指向\r\n\t# $locationProvider.html5Mode(true).hashPrefix('!');\r\n\t$urlRouterProvider.otherwise \"/site/index\"\r\n).run(($rootScope, $state, CoAuth, WindowInfo) ->\r\n\t$rootScope.$state = $state\r\n\t$rootScope.CoAuth = CoAuth\r\n\t$rootScope.WindowInfo = WindowInfo\r\n)","# 数据模型控制器\r\napp.controller 'SchemaFormCtrl', ($scope, SchemaModel, $state)->\r\n\r\n\t$scope.schema = new SchemaModel()\r\n\t\t\r\n\t$scope.field_types = SchemaModel.field_types\r\n\t$scope.schemas = []\r\n\r\n\t$scope.addField = ->\r\n\t\t$scope.schema.addField()\r\n\t\tconsole.log $scope.schema, $scope.schema.get('fields')\r\n\r\n\t$scope.delField = (index)->\r\n\t\t$scope.schema.fields.splice index,1\r\n\r\n\t$scope.addEnum = (field)->\r\n\t\tfield.enums.push\r\n\t\t\tvalue: ''\r\n\t$scope.delEnum = (field, index)->\r\n\t\tfield.enums.splice index,1\r\n\r\n\t$scope.save = ()->\r\n\t\tSchemaModel.save $scope.schema\r\n\t\t.then (res)->\r\n\t\t\t$state.go 'schema.update',\r\n\t\t\t\t_id: res._id\r\n\t\t\treturn res\r\n\t\t.then (doc)->\r\n\t\t\tsocket.emit 'RunSchameTest', doc\r\n\t\t.fail (err)->\r\n\t\t\tconsole.log err\r\n\t\t.done()","\r\napp.controller 'SiteIndexCtrl', ($scope, $element, WindowInfo)->\r\n\r\n\t$scope.project_path = 'D:/htdocs/colee-waimao/src/trunk'\r\n\t$scope.joinAppAndStart = ->\r\n\t\tStartApp.run $scope.project_path, (data)->\r\n\t\t\t$scope.$broadcast 'console:message', data\r\n\t# 创建模式\r\n\t$scope.createSchemas = ->\r\n\t\tCreateSequelize.createSchemas $scope.project_path, (data)->\r\n\t\t\t$scope.$broadcast 'console:message', data\r\n\t# 创建模型\r\n\t$scope.createModels = ->\r\n\t\tCreateSequelize.createModels $scope.project_path, (data)->\r\n\t\t\t$scope.$broadcast 'console:message', data\r\n\t# 创建路由\r\n\t$scope.createRouters = ->\r\n\t\tCreateSequelize.createRouters $scope.project_path, (data)->\r\n\t\t\t$scope.$broadcast 'console:message', data\r\n\t# 生成测试文件\r\n\t$scope.createModelTests = ->\r\n\t\tCreateSequelize.createModelTests $scope.project_path, (data)->\r\n\t\t\t$scope.$broadcast 'console:message', data\r\n\t# 运行测试用例\r\n\t# params: {file:'test/models/a.test.js', grep: 'models.xxx'}\r\n\t$scope.runTest = (params)->\r\n\t\tRunTest.run $scope.project_path, params, (data)->\r\n\t\t\t$scope.$broadcast 'console:message', data\r\n\t# 停止所有测试\r\n\t$scope.stopAllTest = ->\r\n\t\tRunTest.closeAll (data)->\r\n\t\t\t$scope.$broadcast 'console:message', data\r\n\r\n\t# 运行的项目列表\r\n\t$scope.running_list = _.keys(StartApp.services)\r\n\r\n\t# 测试用例列表\r\n\t$scope.getTestTree = ->\r\n\t\tRunTest.getTestTree($scope.project_path).then (res)->\r\n\t\t\t$scope.$apply ->\r\n\t\t\t\t$scope.test_list = res\r\n\t","###\r\n控制台面板\r\n<div console-panel name=\"message\"></div>\r\n示例：$scope.$broadcast 'console:message', '11111111111'\r\n###\r\n\r\napp.directive 'consolePanel', (FormatJsonView)->\r\n\t# require: [\"^?form\", \"ngModel\"]\r\n\trestrict: \"AE\"\r\n\treplace: true\r\n\t# templateUrl: \"templates/directives/kt_radio.html\"\r\n\ttemplate: '<div></div>'\r\n\t# transclude: true,\r\n\tscope: true\r\n\r\n\tlink: (scope, element, attrs, ctrl) ->\r\n\t\t$(element).css\r\n\t\t\theight:  '100%'\r\n\t\t\toverflow:'auto'\r\n\t\t\tbackground:'#101010'\r\n\t\t\tfloat: 'left'\r\n\t\t\twidth: '55%'\r\n\r\n\t\trow_number = 0\r\n\t\taddData = (data) ->\r\n\t\t\tif typeof (data) is \"object\"\r\n\t\t\t\t# data = JSON.stringify(data)\r\n\t\t\t\tdata = FormatJsonView data\r\n\t\t\telse data = ansi2html($('<div/>').text(data).html())  if typeof (data) is \"string\"\r\n\t\t\tlog = undefined\r\n\t\t\trow_number++\r\n\t\t\t\r\n\t\t\t# var textNode = $(document.createTextNode(ansi2html(data)));\r\n\t\t\tif $(element).find(\".log-line\").length < 200\r\n\t\t\t\tlog = $(document.createElement(\"div\")).addClass(\"log-line\").css(position: \"relative\")\r\n\t\t\telse\r\n\t\t\t\tlog = $(element).find(\".log-line:first\").html(\"\")\r\n\t\t\tlog.appendTo element\r\n\t\t\tpre = $(\"<pre></pre>\").css(\r\n\t\t\t\tpaddingLeft: 55\r\n\t\t\t\tfontSize: 14\r\n\t\t\t).html(data).appendTo(log)\r\n\t\t\t$(\"<p>\" + row_number + \"</p>\").css(\r\n\t\t\t\tposition: \"absolute\"\r\n\t\t\t\tmargin: 0\r\n\t\t\t\ttextAlign: \"right\"\r\n\t\t\t\tpaddingRight: 5\r\n\t\t\t\tleft: 0\r\n\t\t\t\twidth: 50\r\n\t\t\t\ttop: 0\r\n\t\t\t\tbottom: 0\r\n\t\t\t\tbackground: \"#292929\"\r\n\t\t\t).prependTo log\r\n\t\t\t$(element).scrollTop $(element)[0].scrollHeight\r\n\t\tname = attrs.name||'console'\r\n\t\t# SocketConnect.on(name, addData)\r\n\t\t# # 销毁监听\r\n\t\t# scope.$on '$destroy', ->\r\n\t\t# \tSocketConnect.removeEventListener name, addData\r\n\t\tscope.$on 'console:'+name, (event, data)->\r\n\t\t\taddData data","# use:\r\n# <form ng-submit=\"save()\" method=\"post\" on-ctrl-s=\"save()\">\r\n\r\napp.directive \"onCtrlS\", ->\r\n\tpriority: 100\r\n\trestrict: \"AE\"\r\n\tscope:\r\n\t\tonCtrlS: \"&\" #做为函数体执行\r\n\tlink: (scope, element, attrs)->\r\n\t\t$(element).bind 'keydown', (e)->\r\n\t\t\tif(e.ctrlKey && e.keyCode == 83)\r\n\t\t\t\t# console.log 'onCtrlS'\r\n\t\t\t\tscope.$apply ->\r\n\t\t\t\t\tscope.onCtrlS()\r\n\t\t\t\te.preventDefault()\r\n\t\tscope.$on '$destroy', ->\r\n\t\t\t$(element).unbind 'keydown'","\r\napp.config ($stateProvider, $urlRouterProvider) ->\r\n\t$stateProvider.state(\"schema\",\r\n\t\turl: \"/schema\"\r\n\t\tviews:\r\n\t\t\tcontainer:\r\n\t\t\t\ttemplateUrl: \"templates/schemas/layout.html\"\r\n\t).state(\"schema.index\",\r\n\t\turl: \"/index\"\r\n\t\tviews:\r\n\t\t\tcontainer:\r\n\t\t\t\ttemplateUrl: \"templates/schemas/schema-form.html\"\r\n\t)","\r\napp.config ($stateProvider, $urlRouterProvider) ->\r\n\t$stateProvider.state(\"site\",\r\n\t\turl: \"/site\"\r\n\t\tviews:\r\n\t\t\tcontainer:\r\n\t\t\t\ttemplateUrl: \"templates/site/layout.html\"\r\n\t).state(\"site.index\",\r\n\t\turl: \"/index\"\r\n\t\tviews:\r\n\t\t\tcontainer:\r\n\t\t\t\ttemplateUrl: \"templates/site/index.html\"\r\n\t)","\r\napp.factory 'CoAuth', ()->\r\n\treturn @","###\r\nJSON格式化与缩进显示\r\n###\r\napp.factory 'FormatJsonView', ()->\r\n\tformatJson = (json, options) ->\r\n\t\treg = null\r\n\t\tformatted = \"\"\r\n\t\tpad = 0\r\n\t\tPADDING = \"    \" # one can also use '\\t' or a different number of spaces\r\n\t\t\r\n\t\t# optional settings\r\n\t\toptions = options or {}\r\n\t\t\r\n\t\t# remove newline where '{' or '[' follows ':'\r\n\t\toptions.newlineAfterColonIfBeforeBraceOrBracket = (if (options.newlineAfterColonIfBeforeBraceOrBracket is true) then true else false)\r\n\t\t\r\n\t\t# use a space after a colon\r\n\t\toptions.spaceAfterColon = (if (options.spaceAfterColon is false) then false else true)\r\n\t\t\r\n\t\t# begin formatting...\r\n\t\tif typeof json isnt \"string\"\r\n\t\t\t\r\n\t\t\t# make sure we start with the JSON as a string\r\n\t\t\tjson = JSON.stringify(json)\r\n\t\telse\r\n\t\t\t\r\n\t\t\t# is already a string, so parse and re-stringify in order to remove extra whitespace\r\n\t\t\tjson = JSON.parse(json)\r\n\t\t\tjson = JSON.stringify(json)\r\n\t\t\r\n\t\t# add newline before and after curly braces\r\n\t\treg = /([\\{\\}])/g\r\n\t\tjson = json.replace(reg, \"\\r\\n$1\\r\\n\")\r\n\t\t\r\n\t\t# add newline before and after square brackets\r\n\t\treg = /([\\[\\]])/g\r\n\t\tjson = json.replace(reg, \"\\r\\n$1\\r\\n\")\r\n\t\t\r\n\t\t# add newline after comma\r\n\t\treg = /(\\,)/g\r\n\t\tjson = json.replace(reg, \"$1\\r\\n\")\r\n\t\t\r\n\t\t# remove multiple newlines\r\n\t\treg = /(\\r\\n\\r\\n)/g\r\n\t\tjson = json.replace(reg, \"\\r\\n\")\r\n\t\t\r\n\t\t# remove newlines before commas\r\n\t\treg = /\\r\\n\\,/g\r\n\t\tjson = json.replace(reg, \",\")\r\n\t\t\r\n\t\t# optional formatting...\r\n\t\tunless options.newlineAfterColonIfBeforeBraceOrBracket\r\n\t\t\treg = /\\:\\r\\n\\{/g\r\n\t\t\tjson = json.replace(reg, \":{\")\r\n\t\t\treg = /\\:\\r\\n\\[/g\r\n\t\t\tjson = json.replace(reg, \":[\")\r\n\t\tif options.spaceAfterColon\r\n\t\t\treg = /\\:/g\r\n\t\t\tjson = json.replace(reg, \": \")\r\n\t\t$.each json.split(\"\\r\\n\"), (index, node) ->\r\n\t\t\ti = 0\r\n\t\t\tindent = 0\r\n\t\t\tpadding = \"\"\r\n\t\t\tif node.match(/\\{$/) or node.match(/\\[$/)\r\n\t\t\t\tindent = 1\r\n\t\t\telse if node.match(/\\}/) or node.match(/\\]/)\r\n\t\t\t\tpad -= 1  if pad isnt 0\r\n\t\t\telse\r\n\t\t\t\tindent = 0\r\n\t\t\ti = 0\r\n\t\t\twhile i < pad\r\n\t\t\t\tpadding += PADDING\r\n\t\t\t\ti++\r\n\t\t\tformatted += padding + node + \"\\r\\n\"\r\n\t\t\tpad += indent\r\n\r\n\t\tformatted","app.factory 'SocketConnect', ()->\r\n\t_handlers = {}\r\n\tsocket = $(document)\r\n\tsocket.emit = (event_name, data)->\r\n\t\tconsole.log event_name,data\r\n\t\tsocket.trigger event_name, data\r\n\r\n\t# socket = io.connect(\"http://127.0.0.1:1000/\")\r\n\tsocket.on \"error\", (err) ->\r\n\t\tconsole.log \"err\", err, err.stack\r\n\r\n\tsocket.on \"console\", (data) ->\r\n\t\tconsole.log data\r\n\treturn socket","app.factory 'WindowInfo', ($rootScope)->\r\n\tths = @\r\n\tths.height = $(window).height()\r\n\tths.width = $(window).width()\r\n\t$(window).resize ->\r\n\t\t$rootScope.$apply ->\r\n\t\t\tths.height = $(@).height()\r\n\t\t\tths.width = $(@).width()\r\n\tths"],"sourceRoot":"/source/"}